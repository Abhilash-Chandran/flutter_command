<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Testing Commands | Flutter Command</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Testing Commands | Flutter Command"><meta data-react-helmet="true" name="description" content="Testing is an essential step in the software development cycle. Command uses ValueNotifiers internally and this makes testing commands straight forward. Traditional approaches such as StreamMatcher for asynchronous testing is not applicable. A ValueNotifier is essentially a ChangeNotifier whose changes can be listened to and verified. The approach we used internally is store these results in a List and then compare this against an expected List of values. Generally we will have a Command which is already functional and we write test against it to verify its functional aspects. In  case of widget testing it would be preferable to mock a command and test the corresponding UI elements independently. Lets see these two cases in the upcoming sections."><meta data-react-helmet="true" property="og:description" content="Testing is an essential step in the software development cycle. Command uses ValueNotifiers internally and this makes testing commands straight forward. Traditional approaches such as StreamMatcher for asynchronous testing is not applicable. A ValueNotifier is essentially a ChangeNotifier whose changes can be listened to and verified. The approach we used internally is store these results in a List and then compare this against an expected List of values. Generally we will have a Command which is already functional and we write test against it to verify its functional aspects. In  case of widget testing it would be preferable to mock a command and test the corresponding UI elements independently. Lets see these two cases in the upcoming sections."><meta data-react-helmet="true" property="og:url" content="https://escamoteur.github.io/flutter_command/docs/testing_commands"><link data-react-helmet="true" rel="shortcut icon" href="/flutter_command/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://escamoteur.github.io/flutter_command/docs/testing_commands"><link rel="stylesheet" href="/flutter_command/styles.3b195996.css">
<link rel="preload" href="/flutter_command/styles.def0bbbb.js" as="script">
<link rel="preload" href="/flutter_command/runtime~main.8907f8ab.js" as="script">
<link rel="preload" href="/flutter_command/main.2b10faaf.js" as="script">
<link rel="preload" href="/flutter_command/1.4b031d8b.js" as="script">
<link rel="preload" href="/flutter_command/2.7e32e624.js" as="script">
<link rel="preload" href="/flutter_command/19.01ebb707.js" as="script">
<link rel="preload" href="/flutter_command/20.512a907a.js" as="script">
<link rel="preload" href="/flutter_command/66f14605.204417b5.js" as="script">
<link rel="preload" href="/flutter_command/17896441.8d54a105.js" as="script">
<link rel="preload" href="/flutter_command/656bf38f.8add3033.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/flutter_command/"><img class="navbar__logo" src="/flutter_command/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Flutter Command</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/flutter_command/docs/getting_started">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/escamoteur/flutter_command" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/flutter_command/"><img class="navbar__logo" src="/flutter_command/img/logo.svg" alt="My Site Logo"><strong class="navbar__title">Flutter Command</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/flutter_command/docs/getting_started">Docs</a></li><li class="menu__list-item"><a href="https://github.com/escamoteur/flutter_command" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/flutter_command/docs/getting_started">Flutter Command</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/concepts/value_notifier">ValueNotifier</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Command</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/command_details/command_encounter">A first careful en&#x27;Counter&#x27;</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/command_details/command_full_power">Command Full Power mode</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Command in Detail </a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/command_details/command">Command - Under the hood</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/command_details/command_types">Types of Command</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/command_details/command_interaction">Interact with a Command</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/command_details/error_handling">Error Handling</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/flutter_command/docs/command_details/command_attributes">Command Attributes</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/flutter_command/docs/command_builder">CommandBuilder Widget</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/flutter_command/docs/testing_commands">Testing Commands</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Testing Commands</h1></header><div class="markdown"><p>Testing is an essential step in the software development cycle. <code>Command</code> uses <code>ValueNotifier</code>s internally and this makes testing commands straight forward. Traditional approaches such as <code>StreamMatcher</code> for asynchronous testing is not applicable. A <code>ValueNotifier</code> is essentially a <code>ChangeNotifier</code> whose changes can be listened to and verified. The approach we used internally is store these results in a <code>List</code> and then compare this against an expected <code>List</code> of values. Generally we will have a <code>Command</code> which is already functional and we write test against it to verify its functional aspects. In  case of widget testing it would be preferable to mock a command and test the corresponding UI elements independently. Lets see these two cases in the upcoming sections.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="testing-commands"></a>Testing Commands<a aria-hidden="true" tabindex="-1" class="hash-link" href="#testing-commands" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="command-to-be-tested"></a>Command to be tested<a aria-hidden="true" tabindex="-1" class="hash-link" href="#command-to-be-tested" title="Direct link to heading">#</a></h3><p>Let us assume you want to test an asynchronous command which accepts a name and returns a greeting message after 2 seconds. Following is trivial implementation of such a command.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">Command greetingCommand =</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Command.createAsync&lt;String, String&gt;((String name) async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  await Future.delayed(Duration(seconds: 2));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  return &#x27;Hello $name! Welcome.&#x27;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}, &#x27;Hello! Welcome.&#x27;);</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="test-changes-in-value"></a>Test changes in <code>value</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#test-changes-in-value" title="Direct link to heading">#</a></h3><p>As a simple scenario lets test what is exposed by the <code>Command</code> which by itself is a <code>ValueNotifier</code> and can be listened to changes in its <code>value</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">test(&#x27;Greeting Command returns correct messages&#x27;, () async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // A list that holds the greetings returned by the command.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    List&lt;String&gt; greetings = [];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    greetingCommand.addListener(() {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      greetings.add(greetingCommand.value);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Expect the initial Value is correct</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(greetingCommand.value, &#x27;Hello! Welcome.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Execute the command with the name Foo.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    greetingCommand.execute(&#x27;Alice&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Wait for the command to execute.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await Future.delayed(Duration(seconds: 2));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Expect the value has changed to greet Alice</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(greetingCommand.value, &#x27;Hello Alice! Welcome.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Execute the command again with a different name this time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Since a Command is callable following is also a valid syntax.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    greetingCommand(&#x27;Bob&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Wait for the command to execute.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await Future.delayed(Duration(seconds: 2));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Expect the value has changed to greet Bob</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(greetingCommand.value, &#x27;Hello Bob! Welcome.&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Verify the results.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(greetings, [&#x27;Hello Alice! Welcome.&#x27;, &#x27;Hello Bob! Welcome.&#x27;]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div><p>In the above it is important to note that the initial value is not part of the expected list because the <code>value</code> is set even before adding a listener and hence the value change will not be emitted. However a <code>ValueListenable</code> builder would still receive this initial value, because it internally sets this to its <code>value</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="test-changes-in-results"></a>Test Changes in <code>results</code><a aria-hidden="true" tabindex="-1" class="hash-link" href="#test-changes-in-results" title="Direct link to heading">#</a></h3><p>Command exposes a combined state of its internal execution in an attribute called <code>results</code> in the form of <code>CommandResult</code>. This is much more granular compared to the above test. Here we receive additional information like whether the command is execution has any errors, the parameter if any passed to it and the result if any. Now if you check the expected results it contains more values. Since <code>CommandResult</code> overrides <code>==</code> it can be used directly in list comparison as shown in following snippet. </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">test(&#x27;Greeting Command returns correct results&#x27;, () async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // A list that holds the greetings returned by the command.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    List&lt;CommandResult&gt; greetingResults = [];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    greetingCommand.results.listen((CommandResult greetingResult, _) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      greetingResults.add(greetingResult);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    });</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Execute the command with the name Foo.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    greetingCommand.execute(&#x27;Alice&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Wait for the command to execute.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await Future.delayed(Duration(seconds: 2));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Execute the command again with a different name this time</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Since a Command is callable following is also a valid syntax.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    greetingCommand(&#x27;Bob&#x27;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Wait for the command to execute.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await Future.delayed(Duration(seconds: 2));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Verify the results.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(greetingResults, [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      CommandResult&lt;String, String&gt;(&#x27;Alice&#x27;, null, null, true),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      CommandResult&lt;String, String&gt;(&#x27;Alice&#x27;, &#x27;Hello Alice! Welcome.&#x27;, null, false),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      CommandResult&lt;String, String&gt;(&#x27;Bob&#x27;, null, null, true),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      CommandResult&lt;String, String&gt;(&#x27;Bob&#x27;, &#x27;Hello Bob! Welcome.&#x27;, null, false),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div><p>However note that, if <code>TParam</code> the type of parameter, <code>TResult</code> the type of the result or the <code>Exception</code> thrown inside the command are not <code>==</code> comparable then a direct comparison of <code>CommandResult</code> would still fail. In such cases it is recommended to compare individual properties of these classes or override <code>==</code> for each of them.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="mocking-commands"></a>Mocking Commands<a aria-hidden="true" tabindex="-1" class="hash-link" href="#mocking-commands" title="Direct link to heading">#</a></h2><p>Its not always possible to create all the <code>Command</code>s upfront and proceed the UI development. In order to keep these process independent it would be necessary that the <code>Commands</code> be mockable. This also ensures that the Commands can evolve independently without affecting the UI widget tests as long as they stick to the required <code>TParam</code>, <code>TResult</code> signature. Hence <code>flutter_command</code> exposes a <code>MockCommand</code> class which provides utility functions to mock a <code>Command</code>.</p><p>Let us see an example which is similar to the above mentioned greeting command. We noticed that the <code>results</code> should notify results in the form of <code>CommandResult</code>. This behavior can be easily mocked as shown below. For this assume you have Text widget that shows this greeting message and we use a <code>ValueListenableBuilder</code> in this case. </p><p>Lets first create a <code>MockCommand</code> called <code>mockGreetingCmd</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">final mockGreetingCmd = MockCommand&lt;String, String&gt;(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;Initial Value&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ValueNotifier&lt;bool&gt;(true),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;MockingJay&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      );      </span></div></div></div></div></div><p>Then set up the <code>CommandResults</code> to be notified in its <code>results</code> attribute using the <code>queueResultsForNextExecuteCall</code> function as shown below.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">mockGreetingCmd.queueResultsForNextExecuteCall([</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    CommandResult&lt;String, String&gt;(&#x27;Alice&#x27;, null, null, true),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    CommandResult&lt;String, String&gt;(&#x27;Alice&#x27;, &#x27;Hello Alice! Welcome.&#x27;, null, false),    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]);</span></div></div></div></div></div><p>As a last step execute the mockCommand and test that the widget receives data correctly.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  testWidgets(&#x27;Test Greeting text&#x27;, (tester) async {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    MockCommand&lt;String, String&gt; mockGreetingCmd = MockCommand&lt;String, String&gt;(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;Initial Value&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ValueNotifier&lt;bool&gt;(true),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      false,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      true,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      &quot;MockingJay&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mockGreetingCmd.queueResultsForNextExecuteCall([</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      CommandResult&lt;String, String&gt;(&#x27;Alice&#x27;, null, null, true),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      CommandResult&lt;String, String&gt;(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          &#x27;Alice&#x27;, &#x27;Hello Alice! Welcome.&#x27;, null, false),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ]);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await tester.pumpWidget(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      MaterialApp(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        home: Center(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          child: ValueListenableBuilder&lt;CommandResult&lt;String, String&gt;&gt;(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            valueListenable: mockGreetingCmd.results,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            builder: (context, cmdResult, _) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              print(cmdResult);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              return Text(cmdResult.data);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          ),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      ),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    );</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await tester.pumpAndSettle();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(find.byType(Text), findsOneWidget);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(find.widgetWithText(Center, &#x27;Initial Value&#x27;), findsOneWidget);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // Execute the command and check again.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    mockGreetingCmd.execute();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // verify the text is updated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    await tester.pumpAndSettle();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(find.byType(Text), findsOneWidget);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    expect(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        find.widgetWithText(Center, &#x27;Hello Alice! Welcome.&#x27;), findsOneWidget);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/escamoteur/flutter_command/docs/testing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/flutter_command/docs/command_builder"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CommandBuilder Widget</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#testing-commands" class="table-of-contents__link">Testing Commands</a><ul><li><a href="#command-to-be-tested" class="table-of-contents__link">Command to be tested</a></li><li><a href="#test-changes-in-value" class="table-of-contents__link">Test changes in <code>value</code></a></li><li><a href="#test-changes-in-results" class="table-of-contents__link">Test Changes in <code>results</code></a></li></ul></li><li><a href="#mocking-commands" class="table-of-contents__link">Mocking Commands</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/flutter_command/docs/getting_started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/flutter_command/docs/command_builder">CommandBuilder</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/ThomasBurkhartB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.burkharts.net/apps/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/escamoteur/flutter_command" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Thomas Bhurkart. Built with Docusaurus 2.</div></div></div></footer></div>
<script src="/flutter_command/styles.def0bbbb.js"></script>
<script src="/flutter_command/runtime~main.8907f8ab.js"></script>
<script src="/flutter_command/main.2b10faaf.js"></script>
<script src="/flutter_command/1.4b031d8b.js"></script>
<script src="/flutter_command/2.7e32e624.js"></script>
<script src="/flutter_command/19.01ebb707.js"></script>
<script src="/flutter_command/20.512a907a.js"></script>
<script src="/flutter_command/66f14605.204417b5.js"></script>
<script src="/flutter_command/17896441.8d54a105.js"></script>
<script src="/flutter_command/656bf38f.8add3033.js"></script>
</body>
</html>